{"code":"// Das ist die Schlange\r\nimport { PIXELSIZE, Direction, SCALE, Pixel } from \"./constants\";\r\nexport class Snake {\r\n    constructor(game) {\r\n        this.ORIGINAL_SIZE = 3;\r\n        this.ORIGINAL_DIRECTION = Direction.RIGHT;\r\n        this.ORIGINAL_POSITION = { x: 1, y: 1 };\r\n        this.game = game;\r\n        this.size = this.ORIGINAL_SIZE;\r\n        this.snakeDirection = [this.ORIGINAL_DIRECTION];\r\n        // Ursprünglicher Kopf der Schlange\r\n        this.snakeHead = new Pixel(this.ORIGINAL_POSITION.x, this.ORIGINAL_POSITION.y);\r\n        // Ursprünglicher Schwanz der Schlange\r\n        this.snakeTail = [];\r\n    }\r\n    // Welche Richtung?\r\n    setDirection(direction) {\r\n        const lastDirection = this.snakeDirection[this.snakeDirection.length - 1];\r\n        if (lastDirection == Direction.UP && (direction == Direction.DOWN || direction == Direction.UP)) {\r\n            return;\r\n        }\r\n        if (lastDirection == Direction.DOWN && (direction == Direction.UP || direction == Direction.DOWN)) {\r\n            return;\r\n        }\r\n        if (lastDirection == Direction.LEFT && (direction == Direction.RIGHT || direction == Direction.LEFT)) {\r\n            return;\r\n        }\r\n        if (lastDirection == Direction.RIGHT && (direction == Direction.LEFT || direction == Direction.RIGHT)) {\r\n            return;\r\n        }\r\n        this.snakeDirection.push(direction);\r\n    }\r\n    // Bewegung der Schlange \r\n    move() {\r\n        // aktuellen Kopf zum Schwanz hinzufügen\r\n        this.snakeTail.push(this.snakeHead);\r\n        // nächste Position ermitteln\r\n        this.snakeHead = this.getNext();\r\n        // Wenn der Kopf eins weiter rückt muss ein Stück vom Schwanz weggenommen werden\r\n        if (this.snakeTail.length > this.size) {\r\n            this.snakeTail.splice(0, 1);\r\n        }\r\n    }\r\n    // ermittelt abhängig von der Richtung die x und y Werte des neuen Kopfes\r\n    getNext() {\r\n        const direction = this.snakeDirection.length > 1 ? this.snakeDirection.splice(0, 1)[0] : this.snakeDirection[0];\r\n        switch (direction) {\r\n            case Direction.UP:\r\n                return new Pixel(this.snakeHead.x, this.snakeHead.y - 1);\r\n            case Direction.RIGHT:\r\n                return new Pixel(this.snakeHead.x + 1, this.snakeHead.y);\r\n            case Direction.DOWN:\r\n                return new Pixel(this.snakeHead.x, this.snakeHead.y + 1);\r\n            case Direction.LEFT:\r\n                return new Pixel(this.snakeHead.x - 1, this.snakeHead.y);\r\n        }\r\n        return new Pixel(0, 0);\r\n    }\r\n    // Schlange wird gezeichnet\r\n    draw(context) {\r\n        const { pixelWidth: cellWidth, pixelHeight: cellHeight } = this.game.getSettings();\r\n        // Kopf\r\n        const size = PIXELSIZE * SCALE / 10;\r\n        const offset = PIXELSIZE * SCALE / 3;\r\n        const x = cellWidth * this.snakeHead.x;\r\n        const y = cellHeight * this.snakeHead.y;\r\n        context.fillStyle = \"#6200EE\";\r\n        context.fillRect(x, y, cellWidth, cellHeight);\r\n        // Augen\r\n        switch (this.snakeDirection[0]) {\r\n            case Direction.UP:\r\n                context.beginPath();\r\n                context.arc(x + offset, y + offset, size, 0, 2 * Math.PI, false);\r\n                context.arc(x + 2 * offset, y + offset, size, 0, 2 * Math.PI, false);\r\n                context.fillStyle = \"white\";\r\n                context.fill();\r\n                break;\r\n            case Direction.DOWN:\r\n                context.beginPath();\r\n                context.arc(x + offset, y + 2 * offset, size, 0, 2 * Math.PI, false);\r\n                context.arc(x + 2 * offset, y + 2 * offset, size, 0, 2 * Math.PI, false);\r\n                context.fillStyle = \"white\";\r\n                context.fill();\r\n                break;\r\n            case Direction.RIGHT:\r\n                context.beginPath();\r\n                context.arc(x + 2 * offset, y + offset, size, 0, 2 * Math.PI, false);\r\n                context.arc(x + 2 * offset, y + 2 * offset, size, 0, 2 * Math.PI, false);\r\n                context.fillStyle = \"white\";\r\n                context.fill();\r\n                break;\r\n            case Direction.LEFT:\r\n                context.beginPath();\r\n                context.arc(x + offset, y + offset, size, 0, 2 * Math.PI, false);\r\n                context.arc(x + offset, y + 2 * offset, size, 0, 2 * Math.PI, false);\r\n                context.fillStyle = \"white\";\r\n                context.fill();\r\n                break;\r\n        }\r\n        // Schwanz\r\n        context.fillStyle = \"#BB86FC\";\r\n        this.snakeTail.forEach(cell => context.fillRect(cellWidth * cell.x, cellHeight * cell.y, cellWidth, cellHeight));\r\n    }\r\n    // Schlange wird verlängert\r\n    lengthen(qty = 3) {\r\n        this.size += qty;\r\n    }\r\n    // gebe x und y Wert des Kopfes zurück\r\n    getSnakeHead() {\r\n        return this.snakeHead;\r\n    }\r\n    // trifft der Kopf auf ein Stück vom Schwanz?\r\n    isSnake(pixel) {\r\n        return this.snakeTail.find(el => pixel.x == el.x && pixel.y == el.y);\r\n    }\r\n}\r\n","references":["C:/Users/Linda/OneDrive/Desktop/snake-game/src/constants.ts","C:/Users/Linda/OneDrive/Desktop/snake-game/src/game.ts"]}
